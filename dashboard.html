<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - SecurePass Studio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/dashboard.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/zxcvbn/4.4.2/zxcvbn.js"></script>
</head>

<body>
  <!-- Animated Background Orbs -->
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>
  <div class="orb orb-3"></div>

  <!-- Dashboard Navbar -->
  <nav class="dashboard-nav">
    <div class="nav-content">
      <a href="index.html" class="logo">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2" />
          <path d="M7 11V7a5 5 0 0 1 10 0v4" />
        </svg>
        <span>SecurePass</span>
      </a>

      <div class="nav-links">
        <a href="#" class="nav-link active" data-tab="overview">ğŸ“Š Overview</a>
        <a href="#" class="nav-link" data-tab="vault">ğŸ” Vault</a>
        <a href="#" class="nav-link" data-tab="generator">ğŸ”‘ Generator</a>
        <a href="#" class="nav-link" data-tab="settings">âš™ï¸ Settings</a>
      </div>

      <div class="nav-user">
        <span class="user-name" id="userName">User</span>
        <button id="logoutBtn" class="btn ghost">Logout</button>
      </div>
    </div>
  </nav>

  <main class="dashboard-main">
    <!-- Overview Tab -->
    <section id="overview" class="dashboard-tab active">
      <div class="dashboard-header">
        <h1>Welcome back, <span id="welcomeName">User</span>! ğŸ‘‹</h1>
        <p>Here's your password security overview</p>
      </div>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">ğŸ”</div>
          <div class="stat-info">
            <span class="stat-value" id="totalPasswords">0</span>
            <span class="stat-label">Saved Passwords</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ’ª</div>
          <div class="stat-info">
            <span class="stat-value" id="strongPasswords">0</span>
            <span class="stat-label">Strong Passwords</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">âš ï¸</div>
          <div class="stat-info">
            <span class="stat-value" id="weakPasswords">0</span>
            <span class="stat-label">Weak Passwords</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ“…</div>
          <div class="stat-info">
            <span class="stat-value" id="lastGenerated">Never</span>
            <span class="stat-label">Last Generated</span>
          </div>
        </div>
      </div>

      <div class="quick-actions">
        <h2>Quick Actions</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="switchTab('generator')">
            <span class="action-icon">ğŸ”‘</span>
            <span>Generate Password</span>
          </button>
          <button class="action-btn" onclick="switchTab('vault')">
            <span class="action-icon">ğŸ“‚</span>
            <span>View Vault</span>
          </button>
          <a href="index.html#game" class="action-btn">
            <span class="action-icon">ğŸ®</span>
            <span>Play Game</span>
          </a>
        </div>
      </div>

      <div class="recent-passwords">
        <h2>Recent Passwords</h2>
        <div id="recentList" class="recent-list">
          <p class="empty-state">No passwords saved yet. Generate one to get started!</p>
        </div>
      </div>
    </section>

    <!-- Vault Tab -->
    <section id="vault" class="dashboard-tab">
      <div class="dashboard-header">
        <h1>ğŸ” Password Vault</h1>
        <p>All your saved passwords in one secure place</p>
      </div>

      <div class="vault-controls">
        <div class="search-box">
          <span class="search-icon">ğŸ”</span>
          <input type="search" id="vaultSearch" placeholder="Search passwords...">
        </div>
        <div class="vault-actions">
          <button class="btn secondary" onclick="exportVault()">Export JSON</button>
          <button class="btn secondary" onclick="triggerImport()">Import JSON</button>
          <input type="file" id="importFile" accept=".json" hidden onchange="handleImport(this)">
          <button class="btn primary" onclick="openSaveModal()">+ Add Password</button>
        </div>
      </div>

      <div id="vaultList" class="vault-list">
        <p class="empty-state">Your vault is empty. Save your first password!</p>
      </div>
    </section>

    <!-- Generator Tab -->
    <section id="generator" class="dashboard-tab">
      <div class="dashboard-header">
        <h1>ğŸ”‘ Password Generator</h1>
        <p>Generate secure passwords and save them to your vault</p>
      </div>

      <div class="generator-card card">
        <div class="password-display-box">
          <input type="text" id="generatedPassword" readonly placeholder="Click Generate">
          <button class="icon-btn" onclick="copyGeneratedPassword()">ğŸ“‹</button>
          <button class="icon-btn" onclick="toggleGeneratedVisibility()">ğŸ‘ï¸</button>
        </div>
        <div class="strength-meter-container" style="margin-top: 10px;">
          <div class="strength-bar-bg" style="width: 100%; height: 6px; background: #334155; border-radius: 3px;">
            <div id="genStrengthBar"
              style="width: 0%; height: 100%; background: #ef4444; border-radius: 3px; transition: all 0.3s;"></div>
          </div>
          <p id="genStrengthText" style="font-size: 12px; color: #94a3b8; margin-top: 4px; text-align: right;">Strength:
            N/A</p>
        </div>

        <div class="generator-options">
          <div class="option-row">
            <label>Length: <span id="lengthValue">16</span></label>
            <input type="range" id="genLength" min="8" max="64" value="16">
          </div>

          <div class="option-checkboxes">
            <label class="checkbox"><input type="checkbox" id="genUpper" checked><span>Uppercase (A-Z)</span></label>
            <label class="checkbox"><input type="checkbox" id="genLower" checked><span>Lowercase (a-z)</span></label>
            <label class="checkbox"><input type="checkbox" id="genNumbers" checked><span>Numbers (0-9)</span></label>
            <label class="checkbox"><input type="checkbox" id="genSymbols" checked><span>Symbols (!@#$)</span></label>
          </div>
        </div>

        <div class="generator-actions">
          <button class="btn primary" onclick="generateDashboardPassword()">ğŸ”„ Generate</button>
          <button class="btn save-btn" onclick="handleQuickSave()"
            style="background: linear-gradient(135deg, #22c55e, #16a34a); font-weight: 600;">ğŸ’¾ Save to Vault</button>
          <button class="btn ghost" onclick="openSaveModal()">ğŸ“ Edit & Save</button>
        </div>
      </div>
    </section>

    <!-- Settings Tab -->
    <section id="settings" class="dashboard-tab">
      <div class="dashboard-header">
        <h1>âš™ï¸ Settings</h1>
        <p>Manage your account and preferences</p>
      </div>

      <div class="settings-grid">
        <div class="settings-card card">
          <h3>ğŸ‘¤ Profile</h3>
          <div class="form-group">
            <label>Name</label>
            <input type="text" id="settingsName" placeholder="Your name">
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="settingsEmail" placeholder="Your email" disabled>
          </div>
          <button class="btn primary" onclick="updateProfile()">Save Changes</button>
        </div>

        <div class="settings-card card">
          <h3>ğŸ”’ Security</h3>
          <div class="form-group">
            <label>Current Password</label>
            <input type="password" id="currentPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
          </div>
          <div class="form-group">
            <label>New Password</label>
            <input type="password" id="newPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
          </div>
          <button class="btn primary" onclick="changePassword()">Change Password</button>
        </div>

        <div class="settings-card card danger-zone">
          <h3>âš ï¸ Danger Zone</h3>
          <p>Once you delete your account, there is no going back.</p>
          <button class="btn danger" onclick="deleteAccount()">Delete Account</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Save Password Modal -->
  <dialog id="saveModal" class="modal">
    <div class="modal-box">
      <div class="modal-header">
        <h3>ğŸ’¾ Save Password</h3>
        <button type="button" class="modal-close" onclick="closeSaveModal()">âœ•</button>
      </div>
      <form id="savePasswordForm" class="modal-body">
        <div class="form-group">
          <label>Title *</label>
          <input type="text" id="saveTitle" placeholder="e.g., Gmail, Netflix" required>
        </div>
        <div class="form-group">
          <label>Username / Email</label>
          <input type="text" id="saveUsername" placeholder="your@email.com">
        </div>
        <div class="form-group">
          <label>Website URL</label>
          <input type="url" id="saveSite" placeholder="https://example.com">
        </div>
        <div class="form-group">
          <label>Password *</label>
          <input type="text" id="savePassword" placeholder="Password to save" required>
        </div>
        <div class="form-group">
          <label>Notes</label>
          <textarea id="saveNotes" placeholder="Any additional notes..." rows="2"></textarea>
        </div>

        <!-- Hidden Strength Input -->
        <input type="hidden" id="saveStrength" name="strength">

        <div class="modal-actions">
          <button type="button" class="btn ghost" onclick="closeSaveModal()">Cancel</button>
          <button type="submit" class="btn primary">Save Password</button>
        </div>
      </form>
    </div>
  </dialog>

  <!-- Login Required Modal -->
  <dialog id="loginRequiredModal" class="modal">
    <div class="modal-box" style="text-align: center; max-width: 400px;">
      <div class="modal-header" style="justify-content: center;">
        <h3>ğŸ”’ Login Required</h3>
      </div>
      <div class="modal-body">
        <p style="margin-bottom: 20px; color: var(--text-muted);">
          You need to be logged in to save passwords to your secure vault.
        </p>
        <div class="modal-actions" style="flex-direction: column; gap: 10px;">
          <a href="login.html?redirect=dashboard.html" class="btn primary"
            style="width: 100%; justify-content: center;">Log In</a>
          <a href="register.html?redirect=dashboard.html" class="btn secondary"
            style="width: 100%; justify-content: center;">Create Account</a>
          <button type="button" class="btn ghost"
            onclick="document.getElementById('loginRequiredModal').close()">Continue as Guest</button>
        </div>
      </div>
    </div>
  </dialog>

  <!-- Toast Container -->
  <div id="toastContainer" class="toast-container"></div>

  <script src="js/api.js"></script>
  <script src="js/dashboard.js"></script>
</body>

</html>